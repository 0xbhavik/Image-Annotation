<div class="container" style="margin-top: 50px;">
<%= form_with(model: @annotated_image, url: annotated_image_path(@image),  method: :patch, local: true, html: { multipart: true }) do |form| %>
  <div class="form-group">
    <%= form.label :name %>
    <%= form.text_field :name, value: @image.name,  class: "form-control" %>
  </div>
  <div class="form-group">
    <%= form.label :image %>
    <%= form.file_field :image, class: "form-control-file" %>
  </div>
  <div class="form-group">
    <h4>Add Annotations for Image</h4>
    <div class="key-value-pairs" >
     <%@image.annotations.each do |key,value| %>
      <div class="key-value-pair form-row">
        <div class="col">
          <%= form.text_field "custom_keys[]", value: key, class: "form-control", placeholder: 'Key' %>
        </div>
        <div class="col">
          <%= form.text_field "custom_values[]", value: value , class: "form-control", placeholder: 'Value' %>
        </div>
        <div class="col-auto">
          <button type="button" class="btn btn-sm btn-danger remove-key-value">Remove</button>
        </div>
      </div>
      <% end %>
    </div>
    <button type="button" class="btn btn-sm btn-success add-key-value mt-10">Add More</button>
  </div>
  <div class="form-group">
    <%= form.submit "Submit", class: "btn btn-primary" %>
  </div>
<% end %>
</div>

