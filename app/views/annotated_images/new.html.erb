<div class="container " style="margin-top: 50px;">
  <%= form_with(model: @annotated_image, url: annotated_images_path,  local: true, html: { multipart: true }) do |form| %>
    <div class="form-group">
      <%= form.label :image_name %>
      <%= form.text_field :name , class: "form-control" %>
    </div>
    <div class="form-group">
      <%= form.label :image_file %>
      <%= form.file_field :image, class: "form-control-file" , id: "image_upload" %>
    </div>
    <div class="form-group annotation-section" style="display: none;">
      <div class="key-value-pairs">
      </div>
      <button type="button" class="btn btn-sm btn-success add-key-value mt-10">Add annotation</button>
    </div>
    <div class="form-group">
      <%= form.submit "Submit", class: "btn btn-primary" %>
    </div>
  <% end %>
</div>

<script>
  $(document).ready(function() {
    var imageUpload = $('#image_upload');
    var annotationSection = $('.annotation-section');

    imageUpload.change(function() {
      if (imageUpload[0].files.length > 0) {
        annotationSection.show();
      } else {
        annotationSection.hide();
      }
    });
  });
</script>
